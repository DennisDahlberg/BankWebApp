@page
@model BankWebApp.Pages.Customers.CustomersModel
@{
}


<section id="hero" class="hero section dark-background">

    <img class="backgroundImage" src="~/assets/img/hero-bg.jpg" alt="" data-aos="fade-in">

    <div class="container mt-3">


        <div class="container section-title" data-aos="fade-down">
            <span class="description-title">Customers</span>
            <h2>Customers</h2>
        </div>

        <div class="container mb-1 d-flex gap-3">
            <form method="get">
                <div class="search-box">
                    <button type="submit" class="btn-search"><i class="fas fa-search"></i></button>
                    <input asp-for="@Model.Q" type="text" class="input-search" placeholder="Type to Search...">
                </div>
            </form>
            <a class="btn btn-success d-flex align-items-center gap-2" asp-page="/Customers/Create"><i class="fa-solid fa-plus"></i> Customer</a>
            
        </div>

            <div class="table-responsive">

                <table class="table custom-table">
                    <thead>
                        <tr>

                            <th scope="col">Id</th>
                            <th scope="col">
                                Name
                                <a  asp-page="/Customers/Customers"
                                    asp-route-sortBy="Name"
                                    asp-route-sortOrder="asc"
                                    asp-route-q="@Model.Q">
                                <i class="fa-solid fa-angle-up"></i>
                                </a>
                                <a  asp-page="/Customers/Customers"
                                    asp-route-sortBy="Name"
                                    asp-route-sortOrder="desc"
                                    asp-route-q="@Model.Q">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                            </th>
                        <th scope="col">
                            Address
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="Address"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="asc">
                                <i class="fa-solid fa-angle-up"></i>
                            </a>
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="Address"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="desc">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            City
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="City"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="asc">
                                <i class="fa-solid fa-angle-up"></i>
                            </a>
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="City"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="desc">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            Country
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="Country"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="asc">
                                <i class="fa-solid fa-angle-up"></i>
                            </a>
                            <a asp-page="/Customers/Customers"
                               asp-route-sortBy="Country"
                               asp-route-q="@Model.Q"
                               asp-route-sortOrder="desc">
                                <i class="fa-solid fa-angle-down"></i>
                            </a>
                        </th>
                        <th scope="col">
                            
                        </th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach(var customer in Model.Customers)
                        {
                        <tr>
                                <td>@customer.CustomerId</td>
                                <td><a>@customer.GivenName @customer.SurName</a></td>
                                <td>@customer.Address</td>
                                <td>@customer.City</td>
                                <td>@customer.Country</td>
                                <td><a class="more" asp-page="/Customers/Details" asp-route-id="@customer.CustomerId">Details</a></td>
                            </tr>
                        }



                        <tr class="text-center table-links">
                            <td colspan="6">
                                @if (Model.CurrentPage != 1)
                                {
                                <a asp-page="/Customers/Customers"
                                   asp-route-sortOrder="@Model.SortOrder"
                                   asp-route-sortBy="@Model.SortBy"
                                   asp-route-q="@Model.Q"
                                   asp-route-pageNo="@(Model.CurrentPage - 1)"
                                   class="btn btn-success">
                                    Prev
                                </a>
                                }



                                @for (int i = Math.Max(1, Model.CurrentPage - 3); i <= Math.Min(Model.PageCount, Model.CurrentPage + 3); i++)
                                {
                                    <a asp-page="/Customers/Customers"
                                       asp-route-sortOrder="@Model.SortOrder"
                                       asp-route-sortBy="@Model.SortBy"
                                       asp-route-q="@Model.Q"
                                       asp-route-pageNo="@i"
                                       class="btn @(Model.CurrentPage == i ? "btn-success" : "btn-secondary")">
                                        @i
                                    </a>
                                }

                        
                                


                                @if (Model.CurrentPage != Model.PageCount)
                                {
                                    <a asp-page="/Customers/Customers"
                                       asp-route-sortOrder="@Model.SortOrder"
                                       asp-route-q="@Model.Q"
                                       asp-route-sortBy="@Model.SortBy"
                                       asp-route-pageNo="@(Model.CurrentPage + 1)"
                                       class="btn btn-success">
                                        Next
                                    </a>
                                }
                            
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>


        </div>

    
   
</section>